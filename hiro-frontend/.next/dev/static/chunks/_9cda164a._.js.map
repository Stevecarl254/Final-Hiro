{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/essy/Betty/myhiroproject/hiro-frontend/lib/axiosInstance.js"],"sourcesContent":["import axios from \"axios\";\n\nconst axiosInstance = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\",\n});\n\n// Add token to every request automatically\naxiosInstance.interceptors.request.use((config) => {\n  const token = typeof window !== \"undefined\"\n    ? localStorage.getItem(\"authToken\")\n    : null;\n\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n});\n\n// Handle expired tokens automatically\naxiosInstance.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    if (err.response?.status === 401) {\n      // Token invalid or expired\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"authToken\");\n        window.location.href = \"/login\";\n      }\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default axiosInstance;\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,gBAAgB,mJAAK,CAAC,MAAM,CAAC;IACjC,SAAS,2KAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAC9C;AAEA,2CAA2C;AAC3C,cAAc,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACtC,MAAM,QAAQ,uCACV,aAAa,OAAO,CAAC,eACrB;IAEJ,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IAEA,OAAO;AACT;AAEA,sCAAsC;AACtC,cAAc,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrC,CAAC,MAAQ,KACT,CAAC;IACC,IAAI,IAAI,QAAQ,EAAE,WAAW,KAAK;QAChC,2BAA2B;QAC3B,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///home/essy/Betty/myhiroproject/hiro-frontend/app/%28auth%29/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Mail, Lock, ArrowLeft } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport axiosInstance from \"@/lib/axiosInstance\";\n\nexport default function LoginPage() {\n  const router = useRouter();\n\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [error, setError] = useState(\"\");\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!formData.email || !formData.password) {\n      setError(\"Please fill in all fields\");\n      return;\n    }\n\n    try {\n      const res = await axiosInstance.post(\"/users/login\", formData);\n      const { token, user } = res.data;\n\n      if (!token || !user) {\n        setError(\"Invalid response from server\");\n        return;\n      }\n\n      // Save everything the navbar expects\n      localStorage.setItem(\"authToken\", token);\n      localStorage.setItem(\"userRole\", user.role);\n      localStorage.setItem(\"userName\", user.name);\n\n      // Redirect by role\n      router.push(user.role === \"admin\" ? \"/admin\" : \"/\");\n    } catch (err: any) {\n      const msg =\n        err.response?.data?.message ||\n        \"Login failed. Check your credentials.\";\n      setError(msg);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-[#001f3f] via-[#4da6ff] to-[#e6f2ff] p-6\">\n      <div className=\"bg-white bg-opacity-95 backdrop-blur-md shadow-2xl rounded-3xl w-full max-w-md p-10 relative\">\n        <button\n          onClick={() => router.push(\"/\")}\n          className=\"absolute top-4 left-4 flex items-center text-[#001f3f] hover:text-[#4da6ff] font-semibold\"\n        >\n          <ArrowLeft className=\"w-5 h-5 mr-1\" /> Back\n        </button>\n\n        <h2 className=\"text-3xl font-bold text-center text-[#001f3f] mb-6 mt-2\">\n          Login\n        </h2>\n\n        {error && (\n          <p className=\"text-red-500 text-sm mb-3 text-center font-medium\">\n            {error}\n          </p>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"relative\">\n            <Mail className=\"absolute top-3 left-3 w-5 h-5 text-[#4da6ff]\" />\n            <input\n              type=\"email\"\n              name=\"email\"\n              required\n              value={formData.email}\n              onChange={handleChange}\n              placeholder=\"Email *\"\n              className=\"w-full border border-[#4da6ff] rounded-xl px-10 py-3 focus:outline-none focus:ring-2 focus:ring-[#001f3f] transition\"\n            />\n          </div>\n\n          <div className=\"relative\">\n            <Lock className=\"absolute top-3 left-3 w-5 h-5 text-[#4da6ff]\" />\n            <input\n              type=\"password\"\n              name=\"password\"\n              required\n              value={formData.password}\n              onChange={handleChange}\n              placeholder=\"Password *\"\n              className=\"w-full border border-[#4da6ff] rounded-xl px-10 py-3 focus:outline-none focus:ring-2 focus:ring-[#001f3f] transition\"\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"w-full py-3 rounded-xl bg-gradient-to-r from-[#001f3f] to-[#4da6ff] text-white font-semibold shadow-lg hover:scale-105 transition transform\"\n          >\n            Login\n          </button>\n        </form>\n\n        <p className=\"text-center text-sm text-[#001f3f] mt-5\">\n          Don't have an account?{\" \"}\n          <Link href=\"/register\" className=\"text-[#4da6ff] font-semibold hover:underline\">\n            Sign Up\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QACvC,OAAO;QACP,UAAU;IACZ;IAEA,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,eAAe,CAAC;QACpB,YAAY;YAAE,GAAG,QAAQ;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;IAC7D;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,SAAS,QAAQ,EAAE;YACzC,SAAS;YACT;QACF;QAEA,IAAI;YACF,MAAM,MAAM,MAAM,kIAAa,CAAC,IAAI,CAAC,gBAAgB;YACrD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI;YAEhC,IAAI,CAAC,SAAS,CAAC,MAAM;gBACnB,SAAS;gBACT;YACF;YAEA,qCAAqC;YACrC,aAAa,OAAO,CAAC,aAAa;YAClC,aAAa,OAAO,CAAC,YAAY,KAAK,IAAI;YAC1C,aAAa,OAAO,CAAC,YAAY,KAAK,IAAI;YAE1C,mBAAmB;YACnB,OAAO,IAAI,CAAC,KAAK,IAAI,KAAK,UAAU,WAAW;QACjD,EAAE,OAAO,KAAU;YACjB,MAAM,MACJ,IAAI,QAAQ,EAAE,MAAM,WACpB;YACF,SAAS;QACX;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAU;;sCAEV,6LAAC,gOAAS;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;8BAGxC,6LAAC;oBAAG,WAAU;8BAA0D;;;;;;gBAIvE,uBACC,6LAAC;oBAAE,WAAU;8BACV;;;;;;8BAIL,6LAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,6MAAI;oCAAC,WAAU;;;;;;8CAChB,6LAAC;oCACC,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,OAAO,SAAS,KAAK;oCACrB,UAAU;oCACV,aAAY;oCACZ,WAAU;;;;;;;;;;;;sCAId,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,6MAAI;oCAAC,WAAU;;;;;;8CAChB,6LAAC;oCACC,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,OAAO,SAAS,QAAQ;oCACxB,UAAU;oCACV,aAAY;oCACZ,WAAU;;;;;;;;;;;;sCAId,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;8BAKH,6LAAC;oBAAE,WAAU;;wBAA0C;wBAC9B;sCACvB,6LAAC,0KAAI;4BAAC,MAAK;4BAAY,WAAU;sCAA+C;;;;;;;;;;;;;;;;;;;;;;;AAO1F;GA/GwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}